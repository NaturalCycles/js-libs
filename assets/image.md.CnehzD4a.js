var E=Object.defineProperty;var H=(l,t,e)=>t in l?E(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var u=(l,t,e)=>H(l,typeof t!="symbol"?t+"":t,e);import{d as B,v as O,x as z,q as C,o as h,c as d,j as s,t as v,af as w,ag as x,e as Y,F as M,B as S,N as b,p,C as W,a as f,E as y}from"./chunks/framework.BxjyvXIc.js";import{_ as D}from"./chunks/object.util.CbWrJl9r.js";import"./chunks/is.util.BDVbkSgX.js";import"./chunks/types.C-9dMxxX.js";class P{constructor(t){u(this,"cfg");u(this,"resizeObserver");u(this,"containerWidth",-1);this.cfg={maxHeight:300,margin:8,...t},this.resizeObserver=new ResizeObserver(e=>this.update(e)),this.resizeObserver.observe(t.containerElement)}stop(){this.resizeObserver.disconnect()}update(t){const e=Math.floor(t[0].contentRect.width);e!==this.containerWidth&&(this.containerWidth=e,console.log(`resize ${e}`),this.doLayout(this.cfg.images),this.cfg.onChange(this.cfg.images))}doLayout(t){if(t.length===0)return;const{maxHeight:e}=this.cfg;let a=t.slice(0);e:for(;a.length>0;){let n,g;for(let m=1;m<=a.length;m++)if(n=a.slice(0,m),g=this.getHeigth(n),g<e){this.setHeight(n,g),a=a.slice(m);continue e}this.setHeight(n,Math.min(e,g));break}}getHeigth(t){const e=this.containerWidth-t.length*this.cfg.margin;let a=0;return t.forEach(n=>a+=n.aspectRatio),e/a}setHeight(t,e){t.forEach(a=>{a.fitWidth=Math.floor(e*a.aspectRatio),a.fitHeight=Math.floor(e)})}}const Q={class:"app-content"},V={class:"label"},$={class:"label"},q={key:0},L=["src"],N=B({__name:"FitImagesDemo",setup(l){const t=["a8ZYS21_Toc","rpxnS9CtEDw","Ck-qAr0qbAI","h5UOgcq1Dkw","Jwhzumwgq9Q","2aLB0aQI5v4","0Q_XPEm2oVQ","bz0H2d753_U","oSIl84tpYYY","cX0Yxw38cx8","Y6Oi_1aGKPg","AqGhEk1khbE","XDvvt_IEH_w","leSvrOiu-nE","lkeBDBTwjWQ","6tJ50mdoyY4","wqJW5B9Q05I","Q2xGYGSu0Qo","Ai-AnKx5bSM","O4TA_kXW9as","aV31XuctrM8","zwoYd0ZiBmc","vMGM9Y48eIY"],e=p(300),a=p(8),n=p([]),g=p();O(async()=>{const r={};await new Promise(i=>{t.forEach(o=>{const c=new Image;c.onload=()=>{const{width:_,height:I,src:k}=c;r[o]={src:k,aspectRatio:_/I},Object.keys(r).length===t.length&&i()},c.src=`https://source.unsplash.com/${o}`})}),n.value=t.map(i=>r[i]),m()}),z(()=>{var r;(r=g.value)==null||r.stop()}),C(()=>a.value+e.value,m);function m(){var i;const r=document.getElementById("imagesContainer");(i=g.value)==null||i.stop(),g.value=new P({containerElement:r,images:n.value,maxHeight:e.value,margin:a.value,onChange:o=>{n.value=D(o)}})}return(r,i)=>(h(),d("div",Q,[s("p",null,[s("span",V,"maxHeight: "+v(e.value),1),w(s("input",{type:"range",min:"10",max:"400",step:"10","onUpdate:modelValue":i[0]||(i[0]=o=>e.value=o)},null,512),[[x,e.value]]),i[2]||(i[2]=s("br",null,null,-1)),s("span",$,"margin: "+v(a.value),1),w(s("input",{type:"range",min:"0",max:"20","onUpdate:modelValue":i[1]||(i[1]=o=>a.value=o)},null,512),[[x,a.value]]),i[3]||(i[3]=s("br",null,null,-1))]),n.value.length?Y("",!0):(h(),d("p",q,"Loading images...")),s("div",{id:"imagesContainer",style:b({margin:`-${a.value/2}px`})},[(h(!0),d(M,null,S(n.value,o=>(h(),d("img",{style:b({width:`${o.fitWidth}px`,height:`${o.fitHeight}px`,margin:`${a.value/2}px`}),src:o.src,alt:"img"},null,12,L))),256))],4)]))}}),A={id:"image",tabindex:"-1"},j=JSON.parse('{"title":"Image","description":"","frontmatter":{},"headers":[],"relativePath":"image.md","filePath":"image.md"}'),G={name:"image.md"},J=Object.assign(G,{setup(l){return(t,e)=>{const a=W("Badge");return h(),d("div",null,[s("h1",A,[e[0]||(e[0]=f("Image ",-1)),y(a,{text:"experimental",type:"warning"}),e[1]||(e[1]=f()),e[2]||(e[2]=s("a",{class:"header-anchor",href:"#image","aria-label":'Permalink to "Image <Badge text="experimental" type="warning"/>"'},"​",-1))]),e[3]||(e[3]=s("h2",{id:"fitimages",tabindex:"-1"},[f("fitImages "),s("a",{class:"header-anchor",href:"#fitimages","aria-label":'Permalink to "fitImages"'},"​")],-1)),e[4]||(e[4]=s("p",null,"Function to Layout images in a way that they fit the available space. Like Google Photos do.",-1)),e[5]||(e[5]=s("p",null,'It can probably be called "fixed height layout".',-1)),e[6]||(e[6]=s("p",null,"See the demos below. Try resizing the browser window or sliders to see the effect of it.",-1)),y(N)])}}});export{j as __pageData,J as default};
