var C=Object.defineProperty;var S=(t,e,i)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var d=(t,e,i)=>S(t,typeof e!="symbol"?e+"":e,i);import{_ as D}from"./chunks/assert.xK6YoWcq.js";import{_ as x}from"./chunks/types.C-9dMxxX.js";import{_ as M}from"./chunks/is.util.BDVbkSgX.js";import{i as k}from"./chunks/env.BUzbqU-4.js";import{_ as A}from"./chunks/stringify.Dc04K225.js";import{d as w,v as B,C as R,c as L,o as T,j as g,ae as P,G as m,a as E}from"./chunks/framework.Bpw2SErm.js";function O(t,e){return`${t.constructor.name}.${e}`}const V=t=>{if(t.length!==0)return t.length===1&&M(t[0])?t[0]:JSON.stringify(t)};class N{constructor(){d(this,"m",new Map)}has(e){return this.m.has(e)}get(e){return this.m.get(e)}set(e,i){this.m.set(e,i)}clear(){this.m.clear()}}const I=(t={})=>(e,i,n)=>{D(n.value,"function","Memoization can be applied only to methods");const a=n.value,s=new Map,{logger:l=console,cacheFactory:f=()=>new N,cacheKeyFn:_=V}=t,v=String(i),F=O(e,v);return n.value=function(...o){const h=this,p=_(o);let r=s.get(h);if(r||(r=f(),s.set(h,r)),r.has(p))return r.get(p);const c=a.apply(h,o);try{r.set(p,c)}catch(b){l.error(b)}return c},x(n.value,{clear:()=>{l.log(`${F} @_Memo.clear()`),s.forEach(o=>o.clear()),s.clear()},getInstanceCache:()=>s,getCache:o=>s.get(o)}),n};var j=Object.defineProperty,K=Object.getOwnPropertyDescriptor,z=(t,e,i,n)=>{for(var a=K(e,i),s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=l(e,i,a)||a);return a&&j(e,i,a),a};const $="__red-dot__",y=()=>{};class u{constructor(e){d(this,"cfg");d(this,"adminMode",!1);d(this,"listening",!1);this.cfg={predicate:i=>i.ctrlKey&&i.key==="L",persistToLocalStorage:!0,localStorageKey:"__adminMode__",onRedDotClick:y,onChange:y,beforeEnter:()=>!0,beforeExit:()=>!0,...e}}startListening(){this.listening||k()||(this.adminMode=!!localStorage.getItem(this.cfg.localStorageKey),this.adminMode&&this.toggleRedDotVisibility(),document.addEventListener("keydown",this.keydownListener.bind(this),{passive:!0}),this.listening=!0)}stopListening(){k()||(document.removeEventListener("keydown",this.keydownListener),this.listening=!1)}async keydownListener(e){this.cfg.predicate(e)&&await this.toggleRedDot()}async toggleRedDot(){try{if(!await this.cfg[this.adminMode?"beforeExit":"beforeEnter"]())return}catch(e){console.error(e),alert(A(e));return}if(this.adminMode=!this.adminMode,this.toggleRedDotVisibility(),this.cfg.persistToLocalStorage){const{localStorageKey:e}=this.cfg;this.adminMode?localStorage.setItem(e,"1"):localStorage.removeItem(e)}this.cfg.onChange(this.adminMode)}toggleRedDotVisibility(){this.getRedDotElement().style.display=this.adminMode?"block":"none"}getRedDotElement(){const e=document.createElement("div");return e.id=$,e.style.cssText="position:fixed;width:24px;height:24px;margin-top:-12px;background-color:red;opacity:0.5;top:50%;left:0;z-index:9999999;cursor:pointer;border-radius:0 3px 3px 0",e.addEventListener("click",()=>this.cfg.onRedDotClick()),document.body.append(e),e}}z([I()],u.prototype,"getRedDotElement");const q=w({__name:"AdminModeDemo",setup(t){const e=new u({onChange:i=>console.log({adminMode:i}),onRedDotClick:()=>alert("RedDot clicked")});return B(()=>{e.startListening()}),(i,n)=>null}}),J={id:"adminservice",tabindex:"-1"},ee=JSON.parse('{"title":"AdminService","description":"","frontmatter":{},"headers":[],"relativePath":"adminService.md","filePath":"adminService.md"}'),G={name:"adminService.md"},ie=Object.assign(G,{setup(t){return(e,i)=>{const n=R("Badge");return T(),L("div",null,[g("h1",J,[i[0]||(i[0]=E("AdminService ",-1)),m(n,{text:"experimental",type:"warning"}),i[1]||(i[1]=E()),i[2]||(i[2]=g("a",{class:"header-anchor",href:"#adminservice","aria-label":'Permalink to "AdminService <Badge text="experimental" type="warning"/>"'},"â€‹",-1))]),i[3]||(i[3]=P("",6)),m(q)])}}});export{ee as __pageData,ie as default};
